{"meta":{"file_version":"4.0.2","database_name":"demo","export_timestamp":"2024-04-29T18:43:13.94145+00:00","export_library_fqn":["digital_product_passport"],"database_schema_version":"4.9.0"},"types":[{"fqn":["digital_product_passport","battery_materials_and_composition"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Weight Of Electrolyte Materials","default_value":null,"relative_name":"weight_of_electrolyte_materials","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:48:15.244771+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Concentration Range Of Hazardous Lithium","default_value":null,"relative_name":"concentration_range_of_hazardous_lithium","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:49:15.911604+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Steel","default_value":null,"relative_name":"raw_material_steel","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:49:44.658684+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Graphite","default_value":null,"relative_name":"raw_material_graphite","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:50:17.919309+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Nickel","default_value":null,"relative_name":"raw_material_nickel","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:50:59.972324+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Battery Chemistry","default_value":null,"relative_name":"battery_chemistry","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:51:23.65926+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Iron","default_value":null,"relative_name":"raw_material_iron","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:51:50.252964+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Aluminum","default_value":null,"relative_name":"raw_material_aluminum","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:52:19.391731+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Lithium","default_value":null,"relative_name":"raw_material_lithium","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:53:16.517949+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Weight Of Anode Materials","default_value":null,"relative_name":"weight_of_anode_materials","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:53:57.475696+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Copper","default_value":null,"relative_name":"raw_material_copper","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:54:18.304261+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Manganese","default_value":null,"relative_name":"raw_material_manganese","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:54:51.463719+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Raw Material Cobalt","default_value":null,"relative_name":"raw_material_cobalt","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:55:20.763813+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]}],"importance":null,"description":null,"edit_status":1,"display_name":"BatteryMaterialsAndCompositionPassport","opcua_methods":[],"relative_name":"battery_materials_and_composition","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-19T14:47:09.052142+00:00","unlink_relative_name":true},{"fqn":["digital_product_passport","batterypassport"],"scripts":[{"run":false,"owner":"cesmiihq","script":"<?php\r\n// Purpose: Get data from a Battery Passport API\r\n//  This script will eventually assume it is configured with a \"custom\" parameter that defines the API key like:\r\n//  {\"apikey\":\"YOURAPIKEY\"}\r\n//  At this point, however, authentication has not been setup on the remote server, so this has been commented out\r\nuse \\TiqUtilities\\Model\\Node;\r\nuse \\TiqUtilities\\Model\\Type;\r\nuse \\TiqUtilities\\Model\\Equipment;\r\nuse \\TiqUtilities\\Model\\Attribute;\r\nuse \\TiqUtilities\\Model\\Organization;\r\nuse \\TiqUtilities\\Model\\Script;\r\nuse Joomla\\CMS\\Response\\JsonResponse; // Used for returning data to the client.\r\nrequire_once 'thinkiq_context.php';\r\nrequire_once 'load_cms.php';\r\n$context = new Context();\r\nif (!defined('JPATHBASE')) define('JPATHBASE', dirname(__DIR__));\r\n\r\n//Load helper script\r\nScript::includeScript('digital_product_passport.dpphelperfunctions');\r\n\r\n//$apikey = $context->custom_inputs->apikey;\r\n$apikey = false;\r\nif ((!isset($apikey) || $apikey == \"\") && $apikey !== false) {\r\n    $msg = \"No API key set, import script cannot run!\";\r\n    error_log($msg);\r\n    print($msg);\r\n    throw new Exception($msg);\r\n}\r\n\r\n// Find the target object to be updated\r\n$parent = new Node($context->std_inputs->node_id);\r\n$this_passport = strtolower($parent->relative_name);\r\n// if (!$this_passport || $this_passport == \"\") {\r\n//     //Fallback to hard-coded node\r\n//     $parent = Node::getInstance(94758);\r\n//     $this_passport = $parent->relative_name;\r\n// }\r\necho \"Updating: \" . $this_passport . PHP_EOL;\r\n$all_data = json_decode(getPassportData($apikey));\r\n$passport_data = parseDataForThisPassport($all_data, $this_passport);\r\nif (!$passport_data) {    \r\n    echo(\"Could not find data from Passport API that matches this device name: \" . $this_passport);\r\n} else {    \r\n    echo \"Found data for: \" . $this_passport . PHP_EOL;\r\n    //Make time\r\n    $current_time_with_millisecond = DateTime::createFromFormat('U.u', microtime(true))->format(DateTimeInterface::RFC3339_EXTENDED);\r\n    echo \"Using Time: \" . $current_time_with_millisecond . PHP_EOL;\r\n\r\n    //Add child passports, if needed\r\n    $child_passports = $all_data->categories;\r\n    $parent->getChildren();\r\n    $ids_to_update = [];\r\n    $passport_data = [];\r\n    foreach ($child_passports as $child_pass) {\r\n        //check if the child passport type exists in the model\r\n        $child_name = $child_pass->name;\r\n        $child_type_id = checkIfTypeExists($child_name);\r\n        if ($child_type_id != false) {\r\n            echo \"found child passport type in model: \" . $child_name . \" with id: \" . $child_type_id . PHP_EOL;\r\n            $child_id = checkIfChildInstanceOfTypeExists($parent, $child_name);\r\n            if (!$child_id) {\r\n                echo \"the child passport instance needs to be created\" . PHP_EOL;\r\n                $child_id = createChildInstanceOfType($parent, $child_name, $child_type_id);\r\n            } else {\r\n                echo \"child passport instance already exists\" . PHP_EOL;\r\n            }\r\n            array_push($ids_to_update, $child_id);\r\n            array_push($passport_data, $child_pass);\r\n        } else {\r\n            echo \"source data has unknown child: \" . $child_name . PHP_EOL;\r\n        }\r\n    }\r\n    echo PHP_EOL;\r\n    //now update the extant child passport data\r\n    $i = 0;\r\n    $errorCount = 0;\r\n    foreach ($ids_to_update as $id) {\r\n        $child_node = Node::getInstance($id);\r\n        echo \"Updating Child Instance: \" . $child_node->display_name . PHP_EOL;\r\n        //load the attributes in the SMIP type definition\r\n        $child_node->getAttributes();\r\n        foreach ($child_node->attributes as $this_attr) {\r\n            echo \"Attribute: \" . $this_attr->relative_name . PHP_EOL;\r\n            //lookup attribute_definition ids from child_passport (aka category) in payload\r\n            $new_value = getAttributeDataFromChildPassport($passport_data[$i], $this_attr->relative_name);\r\n            if ($new_value !== false) {\r\n                echo \"Update the platform instance attribute id: \" . $this_attr->id . \" with value: \" . $new_value . PHP_EOL;\r\n                try {\r\n                    updateSmipAttributeValue($this_attr, $new_value, $current_time_with_millisecond);\r\n                } catch (Exception $ex) {\r\n                    $errorCount++;\r\n                    echo \"ERROR UPDATING ATTRIBUTE VALUE: \" . $ex . PHP_EOL;\r\n                }\r\n            }\r\n            echo PHP_EOL;\r\n        }\r\n        $i++;\r\n    }\r\n    if ($errorCount > 0) {\r\n        echo \"ERRORS OCCURRED UPDATING \" . $errorCount . \" ATTRIBUTE(S)\" . PHP_EOL;\r\n    } else {\r\n        echo \"Data import complete!\";\r\n    }\r\n    ///die(new JsonResponse('done'));\r\n}\r\n?>","document":{"template":false},"importance":null,"description":null,"edit_status":1,"output_type":"headless","script_type":"php","display_name":"FetchBatteryPassportData","relative_name":"fetchbatterypassportdata","initial_inputs":{"start_timestamp":"2024-04-17T17:17:57.000+00:00","interval_seconds":"60"},"cron_expression":"0 * * * * ? *","exec_on_derived":false,"updated_timestamp":"2024-04-18T16:17:28.465275+00:00","max_acceptable_run_secs":0,"use_outputs_from_last_run":false},{"run":false,"owner":"cesmiihq","script":"<?php\r\n    /* Render UI for NCD Devices and Functions */\r\n\r\n    use Joomla\\CMS\\HTML\\HTMLHelper;\r\n\r\n    HTMLHelper::_('script', 'media/com_thinkiq/js/dist/tiq.core.min.js', array('version' => 'auto', 'relative' => false));\r\n    //HTMLHelper::_('script', 'media/com_thinkiq/js/dist/tiq.tiqGraphQL.min.js', array('version' => 'auto', 'relative' => false));\r\n    HTMLHelper::_('script', 'media/com_thinkiq/js/dist/tiq.components.min.js', array('version' => 'auto', 'relative' => false));\r\n    // HTMLHelper::_('script', 'media/com_thinkiq/js/dist/tiq.charts.min.js', array('version' => 'auto', 'relative' => false));\r\n\r\n    require_once 'thinkiq_context.php';\r\n    $context = new Context();\r\n\r\n    //Find scripts\r\n    use TiqUtilities\\Model\\Script;\r\n\r\n    /*  //Old way\r\n    $passportDetector = new Script('digital_product_passport.batterypassport.fetchbatterypassportdata');\r\n    $passportDetector->script=\"\";\r\n    */\r\n    $passportDetector = new TiqUtilities\\Model\\Script('digital_product_passport.batterypassport.fetchbatterypassportdata');\r\n    $passportDetector_file_name = $passportDetector->script_file_name;\r\n\r\n    /*  //Old way\r\n    $passportDeletor = new Script('digital_product_passport.batterypassport.purgechildpassports');\r\n    $passportDeletor->script=\"\";\r\n    */\r\n    $passportDeletor = new TiqUtilities\\Model\\Script('digital_product_passport.batterypassport.purgechildpassports');\r\n    $passportDeletor_file_name = $passportDeletor->script_file_name;\r\n\r\n    // let's get rid of this since we're not using it at all\r\n    use Joomla\\CMS\\Factory;\r\n    $user = Factory::getUser();\r\n\r\n?>\r\n\r\n<div id=\"app\">\r\n\r\n    <!-- Page Header -->    \r\n    <div class=\"row\">\r\n        <div class=\"col-12\">\r\n        <h1 class=\"pb-2 pt-2\" style=\"font-size:2.5rem; color:#126181;\">\r\n            {{passportData.displayName}}                \r\n            <a v-if=\"true\" class=\"float-end btn btn-sm btn-link mt-2\" style=\"font-size:1rem; color:#126181;\" v-bind:href=\"`/index.php?option=com_modeleditor&view=script&id=${context.std_inputs.script_id}`\" target=\"_blank\">\r\n                source\r\n            </a>            \r\n        </h1>            \r\n        <hr style=\"border-color:#126181; border-width:medium;\" />        \r\n        </div>       \r\n    </div> \r\n\r\n    <!-- Toolbar -->\r\n    <div class=\"mb-4\">\r\n        <button class=\"btn btn-primary\" @click=\"FetchPassports\" style=\"background-color:darkgreen\">Fetch Passports</button> &nbsp;\r\n        <button class=\"btn btn-primary\" @click=\"PurgePassports\" style=\"background-color:maroon\">Clear Passports</button> &nbsp;\r\n        <button class=\"btn btn-primary\" onclick=\"location.reload();\">Refresh</button> &nbsp;\r\n        <span>Result: {{output}}</span>\r\n    </div>\r\n\r\n    <!-- Iterate through Gateways -->    \r\n    <div v-for=\"aGateway in passportData.asThing.equipmentByPartOfId\" class=\"card w-100\">\r\n        <div class=\"card-body\">\r\n            <h5 class=\"card-title\">\r\n                {{aGateway.displayName}}\r\n            </h5>\r\n            <h6 class=\"card-subtitle mb-2 text-muted\"><a :href=\"'https://demo.cesmii.net/component/process_layout/?task=detail.getDetails&id=' + aGateway.id\">Blueprint Detail</a></h6>\r\n            <div class=\"row mt-4\">   \r\n                <div v-if=\"aGateway.typeName=='carbon_footprint'\"> \r\n                    <span v-if=\"aGateway.attributes.find(x=>x.displayName=='Web Link To Public Carbon Footprint Study').stringValue.length>0\">\r\n                        <a :href=\"'' + aGateway.attributes.find(x=>x.displayName=='Web Link To Public Carbon Footprint Study').stringValue\">Carbon Footprint Study</a>\r\n                    </span> \r\n                </div>\r\n            </div>        \r\n        </div>    \r\n    </div>\r\n</div>\r\n<script>    \r\n    var WinDoc = window.document;\r\n\r\n    var app = createApp({\r\n\r\n        el: \"#app\",  \r\n\r\n        data() {\r\n            return {                \r\n                pageTitle: \"International Battery Passport\",   \r\n                context:<?php echo json_encode($context) ?>,      \r\n                user:<?php echo json_encode($user) ?>,   \r\n                passportData: [],\r\n                output: '',\r\n                passportDetectorApi : <?php echo json_encode($passportDetector); ?>,\r\n                passportDeletorApi : <?php echo json_encode($passportDeletor); ?>,\r\n     \r\n            }     \r\n        },    \r\n\r\n        mounted: async function () { \r\n            WinDoc.title = this.pageTitle;\r\n            await this.GetGatewaysAsync();\r\n            console.log(\"MOUNTED FIRED!\");\r\n        },\r\n        \r\n        computed: {\r\n            NowIsh: function(){\r\n                return new moment();\r\n            }\r\n        },\r\n\r\n        methods: {\r\n\r\n            CallScriptAsync: async function(scriptFileName, f, a){\r\n                let apiRoute = `/index.php?option=com_thinkiq&task=invokeScript&id=94595`;\r\n                let settings = { method: 'POST', headers: {} };\r\n                let formData = new FormData();\r\n                formData.append('script_name', scriptFileName);\r\n                formData.append('output_type', 'browser');\r\n                formData.append('function', f);\r\n                formData.append('argument', JSON.stringify(a));\r\n                formData.append('node_id', this.context.std_inputs.node_id);                \r\n                settings.body = formData;\r\n\r\n                let aResponse = await fetch(apiRoute, settings);\r\n                let aResponseData = await aResponse.json();\r\n                return aResponseData;\r\n            },\r\n\r\n            FetchPassports: async function(){\r\n                this.output = \"Fetching blueprints...\";\r\n                console.log(\"calling: \" + this.passportDetectorApi.script_file_name);\r\n                let aResponse = await this.CallScriptAsync(this.passportDetectorApi.script_file_name, null, null)\r\n                console.log(aResponse);\r\n                this.output = \"Discovery Complete!\";\r\n\r\n                // let's refresh the app, so we know who's new in town...\r\n                await this.GetGatewaysAsync();\r\n\r\n            },\r\n\r\n            PurgePassports: async function(){\r\n                console.log(\"calling: \" + this.passportDeletorApi.script_file_name);\r\n\r\n                let aResponse = await this.CallScriptAsync(this.passportDeletorApi.script_file_name, null, null)\r\n                console.log(aResponse);\r\n                this.output = \"Purged all passports!\";\r\n\r\n                // let's refresh the app, so we know who's still standing...\r\n                await this.GetGatewaysAsync();\r\n            },\r\n\r\n            GetGatewaysAsync: async function () {    \r\n                let query = `            \r\n                query MyQuery {           \r\n                    object(id: \"${this.context.std_inputs.node_id}\") {    \r\n                        id          \r\n                        displayName \r\n                        typeName \r\n                        asThing {\r\n                            equipmentByPartOfId {                \r\n                                id                          \r\n                                displayName \r\n                                typeName                       \r\n                                attributes {                \r\n                                    id      \r\n                                    displayName           \r\n                                    stringValue                   \r\n                                }                         \r\n                                childEquipment {                     \r\n                                    id                             \r\n                                    displayName                     \r\n                                    attributes {          \r\n                                        id                                     \r\n                                        displayName            \r\n                                        relativeName       \r\n                                        stringValue\r\n                                        getTimeSeries(startTime:\"${(new moment()).toISOString()}\" endTime:\"${(new moment()).toISOString()}\") {\r\n                                            id\r\n                                            ts\r\n                                            stringvalue\r\n                                        }    \r\n                                    }\r\n                                    typeName                          \r\n                                }            \r\n                            }      \r\n                        }            \r\n                    }\r\n                }    \r\n                `;\r\n                let aResponse = await tiqJSHelper.invokeGraphQLAsync(query);\r\n                console.log(\"GraphQL Response: \" + JSON.stringify(aResponse));\r\n                this.passportData = aResponse.data.object;//.asThing.equipmentByPartOfId;            \r\n            }        \r\n        },    \r\n    }).mount('#app');\r\n</script>","document":{"template":false},"importance":null,"description":null,"edit_status":1,"output_type":"display","script_type":"php","display_name":"Display Battery Passport","relative_name":"display_battery_passport","initial_inputs":{"start_timestamp":"2024-04-17T17:55:39.000+00:00","interval_seconds":"60"},"cron_expression":"0 * * * * ? *","exec_on_derived":false,"updated_timestamp":"2024-04-18T17:01:02.400875+00:00","max_acceptable_run_secs":0,"use_outputs_from_last_run":true},{"run":false,"owner":"cesmiihq","script":"<?php\r\n// Purpose: Get data from a Battery Passport API\r\n//  This script will eventually assume it is configured with a \"custom\" parameter that defines the API key like:\r\n//  {\"apikey\":\"YOURAPIKEY\"}\r\n//  At this point, however, authentication has not been setup on the remote server, so this has been commented out\r\nuse \\TiqUtilities\\Model\\Node;\r\nuse \\TiqUtilities\\Model\\Script;\r\nrequire_once 'thinkiq_context.php';\r\nrequire_once 'load_cms.php';\r\n$context = new Context();\r\nif (!defined('JPATHBASE')) define('JPATHBASE', dirname(__DIR__));\r\n\r\n//Load helper script\r\nScript::includeScript('digital_product_passport.dpphelperfunctions');\r\n\r\n// Find the target object to be purged of children\r\n$parent = new Node($context->std_inputs->node_id);\r\n$this_passport = strtolower($parent->relative_name);\r\nif (!$this_passport || $this_passport == \"\") {\r\n    //Fallback to hard-coded node\r\n    $parent = Node::getInstance(94758);\r\n    $this_passport = $parent->relative_name;\r\n}\r\necho \"Purging: \" . $this_passport . PHP_EOL;\r\npurgeChildInstances($parent);\r\necho \"Done\";\r\n?>","document":{"template":false},"importance":null,"description":null,"edit_status":1,"output_type":"headless","script_type":"php","display_name":"PurgeChildPassports","relative_name":"purgechildpassports","initial_inputs":{"start_timestamp":"2024-04-17T17:18:57.000+00:00","interval_seconds":"60"},"cron_expression":"0 * * * * ? *","exec_on_derived":false,"updated_timestamp":"2024-04-18T15:50:26.070955+00:00","max_acceptable_run_secs":0,"use_outputs_from_last_run":false}],"document":null,"attributes":[],"importance":null,"description":"<p></p>\n<p>Battery Passport Data</p>\n<p><a href=\"https://www.autocar.co.uk/sites/autocar.co.uk/files/styles/gallery_slide/public/images/car-reviews/first-drives/legacy/main_23.jpg?itok=wkR8L4p3\" class=\"jcepopup\" data-mediabox=\"1\"><img src=\"https://www.autocar.co.uk/sites/autocar.co.uk/files/styles/gallery_slide/public/images/car-reviews/first-drives/legacy/main_23.jpg?itok=wkR8L4p3\" alt=\"\" width=\"200\" height=\"200\" /></a></p>","edit_status":3,"display_name":"BatteryPassport","opcua_methods":[],"relative_name":"batterypassport","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T17:10:13.939699+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","carbon_footprint"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Share Of Battery Carbon Footprint EOL Recycling","default_value":null,"relative_name":"share_of_battery_carbon_footprint_eol_recycling","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:27:38.319753+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Share Of Battery Carbon Footprint Distribution","default_value":null,"relative_name":"share_of_battery_carbon_footprint_distribution","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:28:11.346878+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Share Of Battery Carbon Footprint Main Product","default_value":null,"relative_name":"share_of_battery_carbon_footprint_main_product","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:28:36.363647+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Battery Carbon Footprint","default_value":null,"relative_name":"battery_carbon_footprint","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:29:18.538744+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Share Of Battery Carbon Footprint Raw Material","default_value":null,"relative_name":"share_of_battery_carbon_footprint_raw_material","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:29:48.536509+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Web Link To Public Carbon Footprint Study","default_value":null,"relative_name":"web_link_to_public_carbon_footprint_study","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:30:05.520994+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null}],"importance":null,"description":"<p>Carbon Footprint Data</p>\n<p><a href=\"https://assets.justenergy.com/wp-content/uploads/2013/04/iStock_000014351447Medium-1.jpg\" class=\"jcepopup\" data-mediabox=\"1\"><img src=\"https://assets.justenergy.com/wp-content/uploads/2013/04/iStock_000014351447Medium-1.jpg\" alt=\"\" width=\"200\" height=\"200\" /></a></p>","edit_status":1,"display_name":"CarbonFootprintPassport","opcua_methods":[],"relative_name":"carbon_footprint","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T17:04:30.214694+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","digitalnameplatepassport"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"SerialNumber","default_value":null,"relative_name":"serialnumber","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:19:22.701807+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ManufacturerProductFamily","default_value":null,"relative_name":"manufacturerproductfamily","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:19:33.93265+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ManufacturerName","default_value":null,"relative_name":"manufacturername","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:20:17.904648+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"int","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"YearOfConstruction","default_value":null,"relative_name":"yearofconstruction","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:20:31.345122+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ManufacturerProductDesignation","default_value":null,"relative_name":"manufacturerproductdesignation","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:20:49.625124+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Department","default_value":null,"relative_name":"department","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:16:54.111242+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Street","default_value":null,"relative_name":"street","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:14:37.254135+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"CityTown","default_value":null,"relative_name":"citytown","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:15:00.526538+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Zipcode","default_value":null,"relative_name":"zipcode","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:15:14.0403+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Address","default_value":null,"relative_name":"address","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:15:32.200434+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"NationalCode","default_value":null,"relative_name":"nationalcode","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:15:45.216377+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"EmailAddress","default_value":null,"relative_name":"emailaddress","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:16:07.18852+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"StateCounty","default_value":null,"relative_name":"statecounty","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:16:18.840138+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null}],"importance":null,"description":null,"edit_status":1,"display_name":"DigitalNameplatePassport","opcua_methods":[],"relative_name":"digitalnameplatepassport","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T18:18:29.310205+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","digitalproductpassport"],"scripts":[],"document":null,"attributes":[],"importance":null,"description":null,"edit_status":1,"display_name":"DigitalProductPassport","opcua_methods":[],"relative_name":"digitalproductpassport","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["thinkiq_base_library","equipment"],"access_group_ids":null,"updated_timestamp":"2024-04-17T18:17:07.731772+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","general_battery_and_manufacturer_information"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Manufacturing Place","default_value":null,"relative_name":"manufacturing_place","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:39:30.793909+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Battery Weight","default_value":null,"relative_name":"battery_weight","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:41:19.450393+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","kilogram"]},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Battery Status","default_value":null,"relative_name":"battery_status","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:41:52.904846+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Manufacturers Identification","default_value":null,"relative_name":"manufacturers_identification","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:42:19.653703+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Battery Category","default_value":null,"relative_name":"battery_category","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T14:42:45.381832+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null}],"importance":null,"description":null,"edit_status":1,"display_name":"GeneralBatteryAndManufacturerInformationPassport","opcua_methods":[],"relative_name":"general_battery_and_manufacturer_information","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-19T14:46:19.352397+00:00","unlink_relative_name":true},{"fqn":["digital_product_passport","performance_and_durability"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"int","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Number Of Overcharge Events","default_value":null,"relative_name":"number_of_overcharge_events","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:48:36.714544+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Initial Round Trip Energy Efficiency","default_value":null,"relative_name":"initial_round_trip_energy_efficiency","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:47:32.559125+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Time Spent In Charging During Extreme Temperature Above Boundary","default_value":null,"relative_name":"time_spent_in_charging_during_extreme_temperature_above_boundary","decimal_places":2,"source_category":"dynamic","attribute_limits":[],"updated_timestamp":"2024-04-17T18:47:38.586939+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","minute"]},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Cycle Life Reference Test","default_value":null,"relative_name":"cycle_life_reference_test","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:40:06.698169+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Remaining Round Trip Energy Fade","default_value":null,"relative_name":"remaining_round_trip_energy_fade","decimal_places":2,"source_category":"dynamic","attribute_limits":[],"updated_timestamp":"2024-04-17T18:47:43.9377+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","percent"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Minimum Voltage","default_value":null,"relative_name":"minimum_voltage","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:47:49.737583+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","volt"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Initial Internal Resistance On Battery Cell Level","default_value":null,"relative_name":"initial_internal_resistance_on_battery_cell_level","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:47:56.198094+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","ohm"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"C Rate Of Relevant Cycle Life Test","default_value":null,"relative_name":"c_rate_of_relevant_cycle_life_test","decimal_places":2,"source_category":"dynamic","attribute_limits":[],"updated_timestamp":"2024-04-17T18:48:02.641051+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Current Internal Resistance On Battery Pack Level","default_value":null,"relative_name":"current_internal_resistance_on_battery_pack_level","decimal_places":2,"source_category":"dynamic","attribute_limits":[],"updated_timestamp":"2024-04-17T18:48:11.559737+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","ohm"]},{"icon":null,"document":null,"data_type":"int","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Warranty Period Of The Battery","default_value":null,"relative_name":"warranty_period_of_the_battery","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-17T18:44:37.780035+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","year"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Remaining Capacity","default_value":null,"relative_name":"remaining_capacity","decimal_places":2,"source_category":"dynamic","attribute_limits":[],"updated_timestamp":"2024-04-17T18:48:23.300387+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","ampere_hour"]}],"importance":null,"description":"<p></p>\n<p>Performance and Durability Data</p>\n<p><a href=\"https://cdn.pixabay.com/photo/2016/03/31/18/42/gauge-1294568_1280.png\" class=\"jcepopup\" data-mediabox=\"1\"><img src=\"https://cdn.pixabay.com/photo/2016/03/31/18/42/gauge-1294568_1280.png\" alt=\"\" width=\"200\" height=\"200\" /></a></p>","edit_status":3,"display_name":"PerformanceDurabilityPassport","opcua_methods":[],"relative_name":"performance_and_durability","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T17:10:41.938836+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","technicaldatapassport"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ProductImage","default_value":null,"relative_name":"productimage","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T17:54:23.207017+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ProductClassificationSystem","default_value":null,"relative_name":"productclassificationsystem","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T17:55:19.868773+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ClassificationSystemVersion","default_value":null,"relative_name":"classificationsystemversion","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T17:55:33.843487+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ProductClassId","default_value":null,"relative_name":"productclassid","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T17:56:03.131912+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null}],"importance":null,"description":null,"edit_status":1,"display_name":"TechnicalDataPassport","opcua_methods":[],"relative_name":"technicaldatapassport","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T17:53:05.4285+00:00","unlink_relative_name":false},{"fqn":["digital_product_passport","technicalpropertiessubmodel"],"scripts":[],"document":null,"attributes":[{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Length","default_value":null,"relative_name":"length","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:00:07.356486+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","millimeter"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Diameter","default_value":null,"relative_name":"diameter","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:00:16.209132+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","millimeter"]},{"icon":null,"document":null,"data_type":"float","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Weight","default_value":null,"relative_name":"weight","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T17:59:59.382585+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":["thinkiq_base_library","gram"]},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"SerialNumber","default_value":null,"relative_name":"serialnumber","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-18T18:10:37.7274+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"ManufacturerLogo","default_value":null,"relative_name":"manufacturerlogo","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:04:15.829339+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"HardwareRevision","default_value":null,"relative_name":"hardwarerevision","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:08:07.539634+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"Material","default_value":null,"relative_name":"material","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:08:28.817162+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"WritingColor","default_value":null,"relative_name":"writingcolor","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:08:54.615761+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"EngravingText","default_value":null,"relative_name":"engravingtext","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:09:35.267264+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null},{"icon":null,"document":null,"data_type":"string","is_hidden":false,"max_value":null,"min_value":null,"expression":null,"importance":10,"description":null,"edit_status":1,"is_required":false,"display_name":"EngravingTextBack","default_value":null,"relative_name":"engravingtextback","decimal_places":2,"source_category":"config","attribute_limits":[],"updated_timestamp":"2024-04-19T15:11:43.96776+00:00","attribute_type_fqn":null,"associated_event_ids":null,"enumeration_type_fqn":null,"interpolation_method":"previous","unlink_relative_name":false,"object_history_type_id":null,"object_history_type_fqn":null,"default_enumeration_values":null,"default_measurement_unit_fqn":null}],"importance":null,"description":null,"edit_status":1,"display_name":"TechnicalPropertiesSubmodel","opcua_methods":[],"relative_name":"technicalpropertiessubmodel","classification":"equipment","child_equipment":[],"sub_type_of_fqn":["digital_product_passport","digitalproductpassport"],"access_group_ids":null,"updated_timestamp":"2024-04-18T17:57:21.933321+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","equipment"],"scripts":[],"document":null,"attributes":[],"importance":10,"description":"Base type of equipment types.","edit_status":1,"display_name":"Equipment","opcua_methods":[],"relative_name":"equipment","classification":"equipment","child_equipment":[],"sub_type_of_fqn":null,"access_group_ids":null,"updated_timestamp":"2022-08-02T00:48:48.107651+00:00","unlink_relative_name":false}],"objects":[],"libraries":[{"fqn":["digital_product_passport"],"locked":false,"models":null,"aliases":null,"version":"1.0.0","document":null,"licensing":null,"extensions":null,"importance":null,"description":null,"edit_status":1,"server_uris":null,"display_name":"Digital Product Passport","relative_name":"digital_product_passport","namespace_uris":null,"updated_timestamp":"2024-04-10T17:55:04.328741+00:00","unlink_relative_name":false},{"fqn":["local_library"],"locked":false,"models":null,"aliases":null,"version":"1.0.0","document":null,"licensing":null,"extensions":null,"importance":10,"description":"The library storing type system locally","edit_status":1,"server_uris":null,"display_name":"Local Library","relative_name":"local_library","namespace_uris":null,"updated_timestamp":"2021-02-25T00:01:15.797588+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library"],"locked":true,"models":null,"aliases":null,"version":"1.7.0","document":null,"licensing":"The ThinkIQ Base Library is copyright protected.","extensions":null,"importance":10,"description":"ThinkIQ Base Library","edit_status":1,"server_uris":null,"display_name":"ThinkIQ Base Library","relative_name":"thinkiq_base_library","namespace_uris":null,"updated_timestamp":"2024-01-09T21:06:52.426817+00:00","unlink_relative_name":false}],"quantities":[{"fqn":["thinkiq_base_library","electric_charge_quantity"],"document":null,"importance":10,"description":"The physical property of matter that causes it to experience a force when placed in an electromagnetic field","edit_status":1,"display_name":"Electric charge quantity","relative_name":"electric_charge_quantity","quantity_symbol":"Q","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","electric_potential_quantity"],"document":null,"importance":10,"description":"Amount of work needed to move a unit of electric charge from a reference point to a specific point in an electric field without producing an acceleration","edit_status":1,"display_name":"Electric potential quantity","relative_name":"electric_potential_quantity","quantity_symbol":"V","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","electric_resistance_quantity"],"document":null,"importance":10,"description":"Measure of opposition to the flow of electric current.","edit_status":1,"display_name":"Electric resistance quantity","relative_name":"electric_resistance_quantity","quantity_symbol":"","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","fraction_quantity"],"document":null,"importance":10,"description":"The ratio between two dimensionless numbers","edit_status":1,"display_name":"Fraction quantity","relative_name":"fraction_quantity","quantity_symbol":"Fraction","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","length_quantity"],"document":null,"importance":10,"description":"Distance","edit_status":1,"display_name":"Length quantity","relative_name":"length_quantity","quantity_symbol":"l","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","mass_quantity"],"document":null,"importance":10,"description":"Amount of matter in an object","edit_status":1,"display_name":"Mass quantity","relative_name":"mass_quantity","quantity_symbol":"m","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false},{"fqn":["thinkiq_base_library","time_quantity"],"document":null,"importance":10,"description":"The indefinite continued progress of existence and events that occur in an apparently irreversible succession from the past, through the present, into the future","edit_status":1,"display_name":"Time and duration quantity","relative_name":"time_quantity","quantity_symbol":"t","updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false}],"relationships":[],"opcua_variables":[],"opcua_data_types":[],"script_templates":[{"fqn":["digital_product_passport","dpphelperfunctions"],"run":false,"owner":"cesmiihq","script":"<?php\r\nuse \\TiqUtilities\\Model\\Node;\r\nuse \\TiqUtilities\\Model\\Type;\r\nuse \\TiqUtilities\\Model\\Equipment;\r\nuse \\TiqUtilities\\Model\\Attribute;\r\nuse \\TiqUtilities\\Model\\Organization;\r\nrequire_once 'thinkiq_context.php';\r\n$context = new Context();\r\n\r\n/* Utility Functions */\r\n//todo: move these somewhere?\r\nfunction checkIfTypeExists($type_name) {    \r\n    $type_name=strtolower($type_name);    \r\n    $allTypes = Type::getNodeSet(\"types\")[\"set\"];    \r\n    foreach($allTypes as $aType ){        \r\n        if (strtolower($aType->relative_name) == $type_name) {                    \r\n            return $aType->id;        \r\n        }    \r\n    }    \r\n    return false;\r\n}\r\n\r\nfunction checkIfChildInstanceOfTypeExists($parent, $child_type) {\r\n    $children = $parent->children;    \r\n    if (count($children) <= 0) {        \r\n        return false;    \r\n    } else {        \r\n        foreach($children as $child) {            \r\n            if (str_contains(strtolower($child->relative_name), strtolower($child_type))) {                \r\n                return $child->id;            \r\n            }        \r\n        }    \r\n    }    \r\n    return false;\r\n}\r\n\r\nfunction createChildInstanceOfType($parent, $child_name, $child_type_id) {\r\n    $type_node = Node::getInstance($child_type_id);\r\n    $equipment = new Equipment();    \r\n    $equipment->display_name = makePrettyDisplayName($child_name);    \r\n    $equipment->description = $type_node->description;\r\n    $equipment->type_id = $child_type_id;    \r\n    $equipment->part_of_id = $parent->id;    \r\n    try {        \r\n        $equipment->save();        \r\n        echo \"Created \" . $child_name . \" in: \" . $parent->display_name . PHP_EOL;\r\n        return $equipment->id;    \r\n    }    \r\n    catch (Exception $e) {        \r\n        die (\"Could not find or create \" . $child_name . \" : \" . $e);    \r\n    }\r\n}\r\n\r\nfunction purgeChildInstances($parent) {\r\n    $parent->getChildren();\r\n    foreach($parent->children as $aChild) {\r\n        $results[] = \"Deleting node \" .  $aChild->display_name . \" \" . $aChild->id . PHP_EOL;\r\n        $aChild->delete();\r\n    }\r\n}\r\n\r\nfunction updateSmipAttributeValue($this_attr, $new_value, $current_time_with_millisecond) {\r\n    if ($this_attr->data_source == \"config\") {\r\n        echo \"Doing update for STATIC value...\" . PHP_EOL;\r\n        switch($this_attr->data_type) {\r\n            case \"string\": {\r\n                $this_attr->string_value = $new_value;\r\n                break;\r\n            }\r\n            case \"int\": {\r\n                $this_attr->int_value = $new_value;\r\n                break;\r\n            }\r\n            case \"float\": {\r\n                $this_attr->float_value = $new_value;\r\n                break;\r\n            }\r\n        }\r\n        $this_attr->save();\r\n    } elseif ($this_attr->data_source == \"tag\" || $this_attr->data_source == \"internal\") {\r\n        echo \"Doing update for TIMESERIES value: \" . $new_value . \"...\" . PHP_EOL;\r\n        $values = [$new_value];\r\n        $times = [$current_time_with_millisecond];\r\n        if ($this_attr->data_type == \"float\" || $this_attr->data_type == \"int\")\r\n            $this_attr->insertTimeSeries($values, $times);\r\n    } else {\r\n        echo \"unknown value type \" . $this_attr->data_source . PHP_EOL;\r\n    }\r\n    echo \"Update complete!\" . PHP_EOL;\r\n}\r\n\r\nfunction makePrettyDisplayName($name) {    \r\n    $nameParts = explode(\"_\", $name);    \r\n    $newName = \"\";    \r\n    foreach ($nameParts as $namePart) {        \r\n        $newName .= \" \" . ucfirst($namePart);    \r\n    }    \r\n    return trim($newName);\r\n}\r\n\r\nfunction makeUnprettyRelativeName($name) {    \r\n    $name = strtolower($name);    \r\n    $name = str_replace(\" \", \"_\", $name);    \r\n    return trim($name);\r\n}\r\n\r\nfunction getAttributeDataFromChildPassport($child_pass, $attr_name) {\r\n    $attrib_id = false;\r\n    $attrib_value = false;\r\n    echo \"Finding definition for: \" . $attr_name . PHP_EOL;\r\n    foreach ($child_pass->attribute_definitions as $attrib_def) {\r\n        if ($attr_name == $attrib_def->name) {\r\n            echo \" Found: \" . $attrib_def->name . \" with id \" . $attrib_def->id . PHP_EOL;\r\n            $attrib_id = $attrib_def->id;\r\n            break;\r\n        }\r\n    }\r\n    //use the ids to lookup the value from attributes section of the child passport payload\r\n    if ($attrib_id) {\r\n        echo \"Now get data for \" . $attrib_id . PHP_EOL;\r\n        foreach ($child_pass->product->attributes as $attrib) {\r\n            if ($attrib->definition == $attrib_id) {\r\n                $attrib_value = $attrib->value;\r\n                echo \"The data value is: \" . $attrib_value . PHP_EOL;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return $attrib_value;\r\n}\r\n\r\nfunction parseDataForThisPassport($all_data, $this_passport) {    \r\n    $this_name = makeUnprettyRelativeName($all_data->name);    \r\n    if ($this_name == strtolower($this_passport))        \r\n        return $all_data;    \r\n    else {        \r\n        echo \"could not find passport with name: \" . strtolower($this_name) . PHP_EOL;        \r\n        return false;    \r\n    }\r\n}\r\n\r\nfunction getPassportData($apikey) {\r\n    $ch = curl_init();    \r\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);    \r\n    //BACKUP static endpoint: curl_setopt($ch, CURLOPT_URL, 'https://cesmii.net/blueprint.json');    \r\n    curl_setopt($ch, CURLOPT_URL, 'https://dev-distributor.evidenproductpass.com/api/passports/21858ea4-6c75-4236-93d5-bbc7adb6481c'); \r\n    if ($apikey !== false)   \r\n    curl_setopt($ch, CURLOPT_HTTPHEADER, [    \r\n        'x--api-key: ' . $apikey    \r\n    ]);    \r\n    $response = curl_exec($ch);    \r\n    if(curl_error($ch)) {        \r\n        fwrite($fp, curl_error($ch));    \r\n    }    \r\n    curl_close($ch);    \r\n    $response_obj = json_decode($response);    \r\n    $response = base64_decode($response_obj->blueprint);    \r\n    return $response;\r\n}\r\n ?>","document":{"template":false},"importance":null,"description":null,"edit_status":1,"output_type":"headless","script_type":"php","display_name":"DPPHelperFunctions","relative_name":"dpphelperfunctions","initial_inputs":{"start_timestamp":"2024-04-17T16:19:06.000+00:00","interval_seconds":"60"},"cron_expression":"0 * * * * ? *","exec_on_derived":false,"updated_timestamp":"2024-04-18T17:40:17.51126+00:00","max_acceptable_run_secs":0,"use_outputs_from_last_run":false}],"enumeration_types":[],"measurement_units":[{"fqn":["thinkiq_base_library","ampere_hour"],"symbol":"Ah","document":null,"is_hidden":false,"importance":10,"unece_code":"AMH","unece_name":"ampere hour","description":"A unit of electric charge defining the amount of charge accumulated by a steady flow of one ampere for one hour.","edit_status":1,"display_name":"ampere hour","quantity_fqn":["thinkiq_base_library","electric_charge_quantity"],"opcua_unit_id":4279624,"relative_name":"ampere_hour","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":3600},{"fqn":["thinkiq_base_library","gram"],"symbol":"g","document":null,"is_hidden":false,"importance":10,"unece_code":"GRM","unece_name":"gram","description":null,"edit_status":1,"display_name":"gram","quantity_fqn":["thinkiq_base_library","mass_quantity"],"opcua_unit_id":4674125,"relative_name":"gram","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":0.001},{"fqn":["thinkiq_base_library","kilogram"],"symbol":"kg","document":null,"is_hidden":false,"importance":10,"unece_code":"KGM","unece_name":"kilogram","description":null,"edit_status":1,"display_name":"kilogram","quantity_fqn":["thinkiq_base_library","mass_quantity"],"opcua_unit_id":4933453,"relative_name":"kilogram","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":1},{"fqn":["thinkiq_base_library","millimeter"],"symbol":"mm","document":null,"is_hidden":false,"importance":10,"unece_code":"MMT","unece_name":"millimetre","description":null,"edit_status":1,"display_name":"millimeter","quantity_fqn":["thinkiq_base_library","length_quantity"],"opcua_unit_id":5066068,"relative_name":"millimeter","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":0.001},{"fqn":["thinkiq_base_library","minute"],"symbol":"min","document":null,"is_hidden":false,"importance":10,"unece_code":"MIN","unece_name":"minute [unit of time]","description":null,"edit_status":1,"display_name":"minute","quantity_fqn":["thinkiq_base_library","time_quantity"],"opcua_unit_id":5065038,"relative_name":"minute","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":60},{"fqn":["thinkiq_base_library","ohm"],"symbol":"","document":null,"is_hidden":false,"importance":10,"unece_code":"OHM","unece_name":"ohm","description":null,"edit_status":1,"display_name":"ohm","quantity_fqn":["thinkiq_base_library","electric_resistance_quantity"],"opcua_unit_id":5195853,"relative_name":"ohm","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":1},{"fqn":["thinkiq_base_library","percent"],"symbol":"%","document":null,"is_hidden":false,"importance":10,"unece_code":"P1","unece_name":"percent","description":null,"edit_status":1,"display_name":"percent","quantity_fqn":["thinkiq_base_library","fraction_quantity"],"opcua_unit_id":20529,"relative_name":"percent","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":1},{"fqn":["thinkiq_base_library","volt"],"symbol":"V","document":null,"is_hidden":false,"importance":10,"unece_code":"VLT","unece_name":"volt","description":null,"edit_status":1,"display_name":"volt","quantity_fqn":["thinkiq_base_library","electric_potential_quantity"],"opcua_unit_id":5655636,"relative_name":"volt","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":1},{"fqn":["thinkiq_base_library","year"],"symbol":"y","document":null,"is_hidden":false,"importance":10,"unece_code":"ANN","unece_name":"year","description":"Unit of time equal to 365.25 days. Synonym: Julian year","edit_status":1,"display_name":"year","quantity_fqn":["thinkiq_base_library","time_quantity"],"opcua_unit_id":4279886,"relative_name":"year","conversion_offset":0,"updated_timestamp":"2022-09-14T05:16:01.824244+00:00","unlink_relative_name":false,"conversion_multiplier":31557600}],"relationship_types":[],"opcua_variable_types":[],"opcua_reference_types":[],"md5_checksum":"1bb61edbec7236f99b53ea4966531386"}